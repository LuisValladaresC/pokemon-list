import{u as f,r as c,j as e,a as x,b as m,c as u}from"./index-BOfwm1nd.js";const j=async(s,l)=>{const a=`https://pokeapi.co/api/v2/pokemon?limit=${s}&offset=${l}`,i=await fetch(a);if(!i.ok)throw new Error("Failed to fetch pokemon data");return(await i.json()).results},b=async s=>{const l=`https://pokeapi.co/api/v2/pokemon/${s}/`,a=await fetch(l);if(!a.ok)throw new Error("Failed to fetch pokemon data");return await a.json()},w=({pokemon:s})=>{const l=f(),[a,i]=c.useState(!1),[r,t]=c.useState(!1),d=o=>{i(!a),s.details||(t(!0),b(o).then(h=>{l(x({id:o,details:h})),t(!1)}))};return e.jsxs("li",{onClick:()=>d(s.id),className:"w-80 border rounded-2xl border-gray-300 cursor-pointer overflow-hidden",children:[e.jsx("header",{className:"border-b border-inherit p-2",children:e.jsx("h2",{className:"font-semibold dark:text-white",children:s.name})}),e.jsxs("div",{className:"relative grid justify-center items-center p-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"h-50 max-w-60"}),a&&e.jsxs("div",{className:"absolute top-0 bottom-0 right-0 flex flex-col justify-center left-0 bg-white dark:bg-black/80 dark:text-white opacity-95 px-4",children:[r&&e.jsx("p",{className:"text-center animate-pulse",children:"Loading details..."}),!r&&s.details&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"HP:"})," ",s.details.hp]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Attack:"})," ",s.details.attack]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Defense:"})," ",s.details.defense]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Special Attack:"})," ",s.details.specialAttack]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Special Defense:"})," ",s.details.specialDefense]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Speed:"})," ",s.details.speed]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold",children:"Abilities:"})," ",s.details.abilities.join(", ")]})]})]})]})]})},k=({search:s})=>{const l=f(),a=m(n=>n.pokemons),[i,r]=c.useState([]),[t,d]=c.useState(1),o=20;c.useEffect(()=>{const n=async()=>{const p=await j(o,(t-1)*o);l(u(p))};a.length<o*t?n():r(h())},[t,a]),c.useEffect(()=>{window.scroll(window.scrollX,0)},[t]),c.useEffect(()=>{r(h())},[s]);const h=()=>s?a.filter(p=>p.name.includes(s.toLowerCase())):a.slice((t-1)*o,t*o);return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap justify-center gap-4",children:i.map(n=>e.jsx(w,{pokemon:n},n.id))}),!s&&e.jsxs("div",{className:"fixed bottom-0 flex justify-center my-6",children:[t>1&&e.jsx("button",{onClick:()=>d(t-1),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-l cursor-pointer",children:"Previous"}),e.jsx("button",{onClick:()=>d(t+1),className:`bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 ${t>1?"rounded-r":"rounded"} cursor-pointer`,children:"Next"})]})]})};export{k as default};
